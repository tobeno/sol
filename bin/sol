#!/usr/bin/env node

const rootPath = path.resolve(__dirname, '..');
if (!fs.existsSync(path.join(rootPath, 'node_modules'))) {
  spawnSync('npm i', {
    cwd: rootPath,
  });
}

require('../lib/setup');

const args = process.argv.slice(2);
if (args.length > 0) {
  const { runCommand } = require('../src/modules/cli/commands');

  runCommand(args[0], args.slice(1));
} else {
  const { startSol } = require('../src/modules/sol/sol-server');

  startSol();
}
